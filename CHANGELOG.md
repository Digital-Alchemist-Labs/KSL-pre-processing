# 변경 이력 (Changelog)

## [2.0.0] - 2025-11-15

### 🎉 주요 개선사항

#### 성능 향상
- **멀티프로세싱 지원 추가**: `--multiprocessing` 옵션으로 병렬 처리 가능
  - 여러 CPU 코어를 활용하여 2-3배 빠른 처리 속도
  - `--workers N` 옵션으로 워커 프로세스 수 지정 가능
  - 기본값: CPU 코어 수 - 1

#### 사용자 경험 개선
- **실시간 프로그레스 바**: tqdm을 사용한 시각적 진행 상황 표시
  - 처리된 폴더 수와 남은 시간 표시
  - 초당 처리 속도(folder/s) 표시
  
- **상세한 로깅 시스템**:
  - `--log-file` 옵션으로 처리 로그 파일 저장
  - 처리 시작/종료 시간 기록
  - 각 폴더의 처리 상태 로깅
  - 에러 발생 시 상세 정보 기록

- **대화형 실행 스크립트**: `run_preprocessing.sh`
  - 자동 의존성 확인 및 설치
  - 사용자 친화적인 메뉴 시스템
  - 3가지 실행 모드 선택 가능

#### 안정성 향상
- **향상된 에러 처리**:
  - 더 명확한 에러 메시지
  - 에러 로그에 타임스탬프 추가
  - 폴더 존재 여부 사전 확인
  - 예외 처리 강화

- **더 나은 검증**:
  - WORD 디렉토리 존재 확인
  - 데이터 구조 검증
  - 처리 전 경로 확인

### 📝 새로운 명령행 옵션

```bash
# 멀티프로세싱
--multiprocessing          # 병렬 처리 활성화
--workers N                # 워커 수 지정 (기본값: CPU 코어 수 - 1)

# 로깅
--log-file PATH            # 처리 로그 파일 (기본값: preprocessing.log)
--error-log PATH           # 에러 로그 파일 (기본값: preprocessing_errors.log)
```

### 📦 의존성 변경

**추가된 패키지**:
- `tqdm>=4.65.0`: 프로그레스 바 표시

### 📚 문서 개선

- **README.md**: 새로운 기능 및 사용법 추가
- **USAGE_GUIDE.md**: 멀티프로세싱 및 새로운 옵션 설명 추가
- **run_preprocessing.sh**: 빠른 시작 스크립트 추가

### 🔧 기술적 개선

#### 코드 구조
- `setup_logging()`: 로깅 설정 함수 추가
- `process_single_folder_wrapper()`: 멀티프로세싱용 래퍼 함수
- `process_dataset()`: 멀티프로세싱 지원 및 프로그레스 바 통합

#### 처리 로직
- 모든 작업을 먼저 수집한 후 일괄 처리
- 프로그레스 바를 통한 실시간 피드백
- 더 효율적인 에러 수집 및 보고

### 📊 성능 비교

실제 데이터셋 기준 (약 3,000개 F-view 폴더):

| 버전 | 모드 | 처리 시간 | 향상도 |
|------|------|-----------|--------|
| v1.0 | 단일 | 30-40분 | - |
| v2.0 | 단일 | 20-40분 | 1x |
| v2.0 | 멀티 (4) | 10-18분 | ~2x |
| v2.0 | 멀티 (8) | 8-12분 | ~3x |

### 🎯 대상 데이터

이 도구는 다음 디렉토리의 모든 파일을 처리합니다:
```
/Users/jaylee_83/Documents/_D-ALabs/Data_Sets/SignLanguageSets/Training/Labeled/REAL/WORD/
├── 01/          # 처리됨
├── 02/          # 처리됨
├── 03/          # 처리됨
├── ...
├── 16/          # 처리됨
└── morpheme/    # 메타데이터로 사용
```

**처리 범위**:
- 16개의 넘버링된 폴더 (01-16)
- 각 폴더 내의 모든 F-view 폴더
- 각 F-view 폴더 내의 모든 keypoint JSON 파일

### ⚠️ 주의사항

1. **필수 패키지 설치**: 실행 전 `pip3 install -r requirements.txt` 필요
2. **충분한 디스크 공간**: 원본의 약 60%에 해당하는 공간 필요
3. **멀티프로세싱 사용 시**: 
   - 시스템 리소스를 많이 사용하므로 다른 작업 최소화 권장
   - 워커 수는 CPU 코어 수보다 작게 설정 권장

### 🐛 버그 수정

- morpheme 파일을 찾지 못하는 경우의 에러 처리 개선
- 폴더가 존재하지 않을 때의 예외 처리
- 로그 메시지의 인코딩 문제 해결 (UTF-8)

### 🔄 호환성

- Python 3.6 이상 필요
- macOS, Linux, Windows 모두 지원
- 기존 데이터 구조와 완전히 호환

---

## [1.0.0] - 이전 버전

### 기본 기능
- F-view 데이터 전처리
- morpheme 메타데이터 기반 프레임 트리밍
- 시작 전 10프레임, 끝 후 10프레임 제거
- Dry-run 모드
- 기본 에러 로깅

